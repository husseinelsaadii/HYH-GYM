<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Class Schedule Management</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/dashboard.css">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    /* Base Styles */
    :root {
      --primary-color: #1c1c1c;
      --accent-color: #ffdd00;
      --text-color: #ffffff;
      --highlight-color: #f4a261;
      --grid-color: rgba(255, 255, 255, 0.1);
      --success-color: #4caf50;
      --danger-color: #f44336;
    }

    body {
      background-color: var(--primary-color);
      color: var(--text-color);
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    h1, h2 {
      font-family: 'Bebas Neue', cursive, Arial, sans-serif;
      color: var(--accent-color);
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
    }

    h2 {
      font-size: 1.8rem;
      margin: 2rem 0 1rem;
    }

    /* Admin Navigation */
    .admin-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .view-schedule-btn {
      background-color: var(--accent-color);
      color: var(--primary-color);
      text-decoration: none;
      padding: 0.8rem 1.5rem;
      border-radius: 4px;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    .view-schedule-btn:hover {
      background-color: #e6c700;
    }

    /* Admin Form */
    .admin-form {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .form-group {
      flex: 1;
      min-width: 200px;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }

    select, input {
      width: 100%;
      padding: 0.8rem;
      border-radius: 4px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--text-color);
    }

    button {
      cursor: pointer;
      font-weight: bold;
      padding: 0.8rem 1.5rem;
      border-radius: 4px;
      border: none;
      transition: background-color 0.3s;
    }

    .btn-add {
      background-color: var(--success-color);
      color: white;
    }

    .btn-add:hover {
      background-color: #3d8b40;
    }

    .btn-danger {
      background-color: var(--danger-color);
      color: white;
    }

    .btn-danger:hover {
      background-color: #d32f2f;
    }

    /* Current Schedule Display */
    .day-section {
      margin-bottom: 2rem;
    }

    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .schedule-table th, .schedule-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--grid-color);
    }

    .schedule-table th {
      background-color: rgba(255, 255, 255, 0.1);
      font-weight: bold;
    }

    .action-btns {
      display: flex;
      gap: 0.5rem;
    }

    .action-btn {
      padding: 0.5rem;
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--text-color);
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .action-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .edit-btn {
      color: var(--accent-color);
    }

    .delete-btn {
      color: var(--danger-color);
    }

    /* Notification */
    .notification {
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 4px;
      text-align: center;
      font-weight: bold;
      display: none;
    }

    .success {
      background-color: var(--success-color);
      color: white;
    }

    .error {
      background-color: var(--danger-color);
      color: white;
    }

    /* Responsive Design */
    @media screen and (max-width: 768px) {
      .form-group {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="admin-nav">
      <h1>Admin - Class Schedule</h1>
      <a href="schedule.html" class="view-schedule-btn">View Public Schedule</a>
    </div>

    <div id="notification" class="notification"></div>

    <div class="admin-form">
      <h2>Add/Edit Class</h2>
      <form id="classForm">
        <input type="hidden" id="editIndex" value="">
        <input type="hidden" id="editDay" value="">
        <div class="form-row">
          <div class="form-group">
            <label for="day">Day:</label>
            <select id="day" required>
              <option value="">Select Day</option>
              <option value="monday">Monday</option>
              <option value="tuesday">Tuesday</option>
              <option value="wednesday">Wednesday</option>
              <option value="thursday">Thursday</option>
              <option value="friday">Friday</option>
              <option value="saturday">Saturday</option>
            </select>
          </div>
          <div class="form-group">
            <label for="time">Time:</label>
            <input type="time" id="time" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="className">Class Name:</label>
            <input type="text" id="className" placeholder="Enter class name" required>
          </div>
          <div class="form-group">
            <label for="coach">Coach:</label>
            <input type="text" id="coach" placeholder="Enter coach name" required>
          </div>
        </div>
        <div class="form-row">
          <button type="submit" id="submitBtn" class="btn-add">Add Class</button>
          <button type="button" id="clearBtn" style="display: none;" class="btn-danger">Cancel Edit</button>
        </div>
      </form>
    </div>

    <h2>Current Schedule</h2>
    <div id="scheduleDisplay">
      <!-- Day sections will be dynamically generated here -->
    </div>
  </div>
  <!-- Footer Section (Simplified) -->
  <footer class="app-footer simplified-footer">
    <div class="footer-content">
      <div class="footer-logo-container">
        <img class="footer-logo" src="images/GYM%20Logo.png" alt="HYH Logo">
      </div>
      <div class="copyright">
        <p>&copy; 2025 HYH TRAINING. ALL RIGHTS RESERVED.</p>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOM elements
      const classForm = document.getElementById('classForm');
      const daySelect = document.getElementById('day');
      const timeInput = document.getElementById('time');
      const classNameInput = document.getElementById('className');
      const coachInput = document.getElementById('coach');
      const submitBtn = document.getElementById('submitBtn');
      const clearBtn = document.getElementById('clearBtn');
      const editIndex = document.getElementById('editIndex');
      const editDay = document.getElementById('editDay');
      const scheduleDisplay = document.getElementById('scheduleDisplay');
      const notification = document.getElementById('notification');

      // Initialize schedule data from localStorage or create new
      let scheduleData = JSON.parse(localStorage.getItem('gymSchedule')) || {
        monday: [],
        tuesday: [],
        wednesday: [],
        thursday: [],
        friday: [],
        saturday: []
      };

      // Display notification
      function showNotification(message, type) {
        notification.textContent = message;
        notification.className = `notification ${type}`;
        notification.style.display = 'block';

        setTimeout(() => {
          notification.style.display = 'none';
        }, 3000);
      }

      // Format time from 24h to 12h format
      function formatTime(time) {
        if (!time) return '';
        const [hours, minutes] = time.split(':');
        const hour = parseInt(hours);
        const ampm = hour >= 12 ? 'PM' : 'AM';
        const formattedHour = hour % 12 || 12;
        return `${formattedHour}:${minutes} ${ampm}`;
      }

      // Save schedule data to localStorage
      function saveScheduleData() {
        localStorage.setItem('gymSchedule', JSON.stringify(scheduleData));
        displaySchedule();
      }

      // Add or update a class
      function handleFormSubmit(e) {
        e.preventDefault();

        const day = daySelect.value;
        const time = timeInput.value;
        const className = classNameInput.value;
        const coach = coachInput.value;

        if (!day || !time || !className || !coach) {
          showNotification('Please fill all fields', 'error');
          return;
        }

        const classObj = {
          time: time,
          formattedTime: formatTime(time),
          name: className,
          coach: coach
        };

        // If editing existing class
        if (editIndex.value !== '') {
          const oldDay = editDay.value;
          const index = parseInt(editIndex.value);

          // If day changed, remove from old day and add to new day
          if (oldDay !== day) {
            scheduleData[oldDay].splice(index, 1);
            scheduleData[day].push(classObj);
          } else {
            scheduleData[day][index] = classObj;
          }

          showNotification('Class updated successfully', 'success');
          clearEditMode();
        } else {
          // Adding new class
          scheduleData[day].push(classObj);
          showNotification('Class added successfully', 'success');
        }

        // Sort classes by time
        for (const day in scheduleData) {
          scheduleData[day].sort((a, b) => a.time.localeCompare(b.time));
        }

        saveScheduleData();
        classForm.reset();
      }

      // Clear edit mode
      function clearEditMode() {
        editIndex.value = '';
        editDay.value = '';
        submitBtn.textContent = 'Add Class';
        clearBtn.style.display = 'none';
        classForm.reset();
      }

      // Set form to edit mode
      function editClass(day, index) {
        const classObj = scheduleData[day][index];

        daySelect.value = day;
        timeInput.value = classObj.time;
        classNameInput.value = classObj.name;
        coachInput.value = classObj.coach;
        editIndex.value = index;
        editDay.value = day;

        submitBtn.textContent = 'Update Class';
        clearBtn.style.display = 'inline-block';

        // Scroll to form
        document.querySelector('.admin-form').scrollIntoView({ behavior: 'smooth' });
      }

      // Delete a class
      function deleteClass(day, index) {
        if (confirm('Are you sure you want to delete this class?')) {
          scheduleData[day].splice(index, 1);
          saveScheduleData();
          showNotification('Class deleted successfully', 'success');
        }
      }

      // Display schedule in admin view
      function displaySchedule() {
        scheduleDisplay.innerHTML = '';

        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];

        days.forEach(day => {
          const daySection = document.createElement('div');
          daySection.className = 'day-section';

          const dayTitle = document.createElement('h3');
          dayTitle.textContent = day.charAt(0).toUpperCase() + day.slice(1);
          daySection.appendChild(dayTitle);

          if (scheduleData[day].length === 0) {
            const noClasses = document.createElement('p');
            noClasses.textContent = 'No classes scheduled';
            daySection.appendChild(noClasses);
          } else {
            const table = document.createElement('table');
            table.className = 'schedule-table';

            // Table header
            const thead = document.createElement('thead');
            thead.innerHTML = `
              <tr>
                <th>Time</th>
                <th>Class</th>
                <th>Coach</th>
                <th>Actions</th>
              </tr>
            `;
            table.appendChild(thead);

            // Table body
            const tbody = document.createElement('tbody');

            scheduleData[day].forEach((classItem, index) => {
              const row = document.createElement('tr');

              const timeCell = document.createElement('td');
              timeCell.textContent = classItem.formattedTime;
              row.appendChild(timeCell);

              const classNameCell = document.createElement('td');
              classNameCell.textContent = classItem.name;
              row.appendChild(classNameCell);

              const coachCell = document.createElement('td');
              coachCell.textContent = classItem.coach;
              row.appendChild(coachCell);

              const actionsCell = document.createElement('td');
              actionsCell.className = 'action-btns';

              const editBtn = document.createElement('button');
              editBtn.className = 'action-btn edit-btn';
              editBtn.innerHTML = 'Edit';
              editBtn.onclick = () => editClass(day, index);
              actionsCell.appendChild(editBtn);

              const deleteBtn = document.createElement('button');
              deleteBtn.className = 'action-btn delete-btn';
              deleteBtn.innerHTML = 'Delete';
              deleteBtn.onclick = () => deleteClass(day, index);
              actionsCell.appendChild(deleteBtn);

              row.appendChild(actionsCell);
              tbody.appendChild(row);
            });

            table.appendChild(tbody);
            daySection.appendChild(table);
          }

          scheduleDisplay.appendChild(daySection);
        });
      }

      // Event listeners
      classForm.addEventListener('submit', handleFormSubmit);
      clearBtn.addEventListener('click', clearEditMode);

      // Initial display
      displaySchedule();
    });
  </script>
</body>
</html>